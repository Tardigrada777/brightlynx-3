!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/js",r(r.s=0)}([function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_size",void 0),n(this,"_range",[]),n(this,"_isTurn",!1),n(this,"_currentPair",{}),n(this,"_firstNumber",null),n(this,"_pairsOfCells",[]),n(this,"_selectedCells",[]),n(this,"_isRunnig",!1),n(this,"_startTime",null),n(this,"_currentTime",null),n(this,"_timeLabel",null),n(this,"_mainTimerID",null),n(this,"_colors",["#2ecc71","#8e44ad","#f1c40f","#c0392b","#34495e","#1abc9c","#7f8fa6","#2f3640"]),this._size=t,this.range=Math.pow(t,2),this._generateInterface(),this._getPairsOfNumbers()}var t,i,a;return t=e,(i=[{key:"_isPlayerWin",value:function(){return this._selectedCells.length==Math.pow(this._size,2)}},{key:"_tick",value:function(){var e=this;this._startTime=new Date;var t=setInterval(function(){var t,r=(((new Date).getTime()-e._startTime.getTime())/1e3).toFixed(0),n=Math.floor(r/60);r<60?t="00 мин. ".concat(r," сек."):(r-=60*n,t="".concat(n," мин. ").concat(r," сек.")),e._currentTime=t,e._timeLabel.innerHTML=t},500);this._mainTimerID=t}},{key:"_restart",value:function(){document.querySelector(".game").innerHTML="",this._generateInterface(),this._currentPair={},this._firstNumber=null,this._pairsOfCells=[],this._selectedCells=[],this._getPairsOfNumbers(),this._tick()}},{key:"_findPairByNumber",value:function(e){var t=this;this._pairsOfCells.forEach(function(r,n){r.includes(parseInt(e))&&(t._currentPair.pair=r,t._currentPair.colorIndex=n)})}},{key:"_findColorByNumber",value:function(e){var t,r=this;return this._pairsOfCells.forEach(function(n,i){n.includes(parseInt(e))&&(t=r._colors[i])}),t}},{key:"_splicePairFromPairs",value:function(){for(var e=0;e<this._pairsOfCells.length;e++){this._pairsOfCells[e].includes(this._currentPair.pair[0])&&this._pairsOfCells.splice(e,1)}}},{key:"_checkColor",value:function(e){var t=this;if(this._isTurn){var r;this._currentPair.pair.forEach(function(e){e!==t._firstNumber&&(r=e)});var n=document.querySelector('[data-number="'.concat(e,'"]'));if(parseInt(e)===r)n.style.backgroundColor=this._colors[this._currentPair.colorIndex],this._isTurn=!1,this._selectedCells.push(e),this._isPlayerWin()&&setTimeout(function(){alert("Вы выиграли! Затраченное время ".concat(t._currentTime)),clearInterval(t._mainTimerID)},0);else{var i=this._findColorByNumber(e);n.style.backgroundColor=i,this._isTurn=!0,setTimeout(function(){n.style.backgroundColor="white"},200)}}else{this._findPairByNumber(e),document.querySelector('[data-number="'.concat(e,'"]')).style.backgroundColor=this._colors[this._currentPair.colorIndex],this._isTurn=!0,this._selectedCells.push(e),this._firstNumber=parseInt(e)}}},{key:"_setNumbers",value:function(){for(var e=document.querySelectorAll(".cell"),t=0;t<e.length;t++){e[t].dataset.number=t+1}}},{key:"_getPairsOfNumbers",value:function(){var e=[];this._range.sort(function(){return Math.random()-.5});for(var t=0;t<this._range.length;t++)if(t%2==0){var r=this._range.slice(t,t+2);e.push(r)}this._pairsOfCells=e}},{key:"_randomSortColors",value:function(){this._colors.sort(function(){return Math.random()-.5})}},{key:"_generateInterface",value:function(){var e=this,t=document.querySelector(".game"),r=document.createElement("table");t.append(r);for(var n=0;n<this._size;n++){for(var i=document.createElement("tr"),a=function(t){var r=document.createElement("td");r.classList.add("cell"),r.addEventListener("click",function(){e._isRunnig?e._checkColor(r.dataset.number):alert("Сначала начните новую игру!")}),i.append(r)},s=0;s<this._size;s++)a();r.append(i)}this._setNumbers();var o=document.createElement("button");o.classList.add("btn-game"),o.innerHTML="Играть",o.addEventListener("click",function(){e._restart(),e._isRunnig=!0}),t.append(o);var u=document.createElement("p");u.innerHTML="00 мин. 00 сек.",this._timeLabel=u,t.append(u)}},{key:"range",set:function(e){return this._range=Array.from({length:e},function(e,t){return t+1}),!0}}])&&r(t.prototype,i),a&&r(t,a),e}();window.onload=function(){new i(4)}}]);